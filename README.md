# ğŸ­ SmartWarehouse - æ™ºæ…§å€‰åº«ç³»çµ±

## ğŸ“‹ å°ˆæ¡ˆç°¡ä»‹

é€™æ˜¯ä¸€å€‹çš„å…¨ç«¯ä½œå“é›†å°ˆæ¡ˆï¼Œæ•´åˆäº†ï¼š

- âœ… **Spring Boot** - Java å¾Œç«¯æ¡†æ¶ï¼ˆé£²æ–™åº«å­˜ç®¡ç†ï¼‰
- âœ… **H2 Database** - å…§å­˜ SQL è³‡æ–™åº«
- âœ… **æ‚²è§€é–æ©Ÿåˆ¶** - ç¢ºä¿é«˜ä½µç™¼ä¸‹çš„è³‡æ–™ä¸€è‡´æ€§
- âœ… **JMeter** - å£“åŠ›æ¸¬è©¦å·¥å…·ï¼ˆé©—è­‰è³‡æ–™ä¸€è‡´æ€§ï¼‰
- âœ… **TDD æ¸¬è©¦** - æ¸¬è©¦é©…å‹•é–‹ç™¼ï¼ˆé«˜ä½µç™¼æ¸¬è©¦æ¡ˆä¾‹ï¼‰
- âœ… **Playwright** - Python è‡ªå‹•åŒ–æ¸¬è©¦æ¡†æ¶
- âœ… **FastAPI** - Python è¼•é‡ç´šå¾Œç«¯æ¡†æ¶
- âœ… **Firestore** - GCP NoSQL è³‡æ–™åº«
- âœ… **GitHub Actions** - CI/CD

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. é£²æ–™å€‰åº«ç®¡ç†ç³»çµ±ï¼ˆSpring Bootï¼‰

#### åŸºæœ¬åŠŸèƒ½
- âœ… **å…¥åº«ç®¡ç†** - æ–°å¢é£²æ–™åº«å­˜
- âœ… **å‡ºåº«ç®¡ç†** - æŒ‰ç…§ FIFO åŸå‰‡å‡ºåº«ï¼ˆå„ªå…ˆå‡ºåº«æœ€æ—©éæœŸçš„ï¼‰
- âœ… **CRUD æ“ä½œ** - å®Œæ•´çš„å¢åˆªæŸ¥æ”¹åŠŸèƒ½
- âœ… **éæœŸæª¢æŸ¥** - è‡ªå‹•æª¢æŸ¥é£²æ–™æ˜¯å¦éæœŸ
- âœ… **å³å°‡éæœŸæé†’** - 7 å¤©å…§éæœŸçš„é£²æ–™æé†’
- âœ… **åº«å­˜çµ±è¨ˆ** - ç¸½åº«å­˜ã€éæœŸæ•¸é‡ã€å³å°‡éæœŸæ•¸é‡

#### é«˜ä½µç™¼è³‡æ–™ä¸€è‡´æ€§ä¿è­‰
- âœ… **æ‚²è§€é–æ©Ÿåˆ¶** - ä½¿ç”¨ `@Lock(LockModeType.PESSIMISTIC_WRITE)` ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§
- âœ… **äº‹å‹™ç®¡ç†** - `@Transactional` ä¿è­‰åŸå­æ€§æ“ä½œ
- âœ… **è² åº«å­˜é˜²è­·** - é˜²æ­¢é«˜ä½µç™¼ä¸‹å‡ºç¾è² åº«å­˜
- âœ… **ç²¾ç¢ºåŒ¹é…é©—è­‰** - åº«å­˜æ‰£æ¸›æ•¸é‡èˆ‡è¨‚å–®æˆåŠŸæ•¸ç²¾ç¢ºåŒ¹é…

### 2. æ¸¬è©¦è‡ªå‹•åŒ–å¹³å°ï¼ˆPythonï¼‰
- âœ… **è‡ªå‹•åŒ–æ¸¬è©¦åŸ·è¡Œ** - GitHub Actions è§¸ç™¼ Playwright æ¸¬è©¦
- âœ… **æ¸¬è©¦çµæœå­˜å„²** - çµæœè‡ªå‹•å¯«å…¥ Firestore
- âœ… **æ¸¬è©¦å ±å‘Š API** - FastAPI æä¾›æ¸¬è©¦çµæœæŸ¥è©¢

## ğŸ› ï¸ æŠ€è¡“æ£§

### å¾Œç«¯ï¼ˆJavaï¼‰
```
Framework: Spring Boot 3.2.0
Database: H2 Database (å…§å­˜è³‡æ–™åº«)
ORM: Spring Data JPA
Locking: Pessimistic Locking (æ‚²è§€é–)
Validation: Jakarta Validation
Build Tool: Maven
Java Version: 17
Testing: JUnit 5 + Spring Boot Test
```

### å£“åŠ›æ¸¬è©¦
```
Tool: Apache JMeter 5.6+
Test Type: é«˜ä½µç™¼è³‡æ–™ä¸€è‡´æ€§æ¸¬è©¦
Concurrency: 50-100 åŸ·è¡Œç·’
Synchronization: Synchronizing Timer
```

### æ¸¬è©¦èˆ‡ APIï¼ˆPythonï¼‰
```
Testing: Playwright + pytest
Backend API: FastAPI
Database: Firestore (GCP å…è²»å±¤)
CI/CD: GitHub Actions
```

## ğŸ“¦ å°ˆæ¡ˆçµæ§‹

```
.
â”œâ”€â”€ backend/                    # Spring Boot å¾Œç«¯
â”‚   â”œâ”€â”€ src/main/java/com/beveragewarehouse/
â”‚   â”‚   â”œâ”€â”€ model/              # å¯¦é«”é¡åˆ¥ï¼ˆBeverageï¼‰
â”‚   â”‚   â”œâ”€â”€ repository/         # è³‡æ–™åº«æ“ä½œï¼ˆJPA Repository + æ‚²è§€é–ï¼‰
â”‚   â”‚   â”œâ”€â”€ service/            # æ¥­å‹™é‚è¼¯å±¤ï¼ˆäº‹å‹™ç®¡ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ controller/        # REST API Controller
â”‚   â”‚   â””â”€â”€ dto/                # è³‡æ–™å‚³è¼¸ç‰©ä»¶
â”‚   â”œâ”€â”€ src/test/java/          # TDD æ¸¬è©¦æ¡ˆä¾‹
â”‚   â”‚   â””â”€â”€ BeverageServiceConcurrencyTest.java
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â”œâ”€â”€ application.properties
â”‚   â”‚   â””â”€â”€ data.sql
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ jmeter/                      # JMeter å£“åŠ›æ¸¬è©¦
â”‚   â”œâ”€â”€ SmartWarehouse_Concurrency_Test.jmx
â”‚   â””â”€â”€ README.md
â”‚
â”œâ”€â”€ tests/                       # Playwright æ¸¬è©¦è…³æœ¬
â”‚   â”œâ”€â”€ test_example.py
â”‚   â””â”€â”€ conftest.py
â”‚
â”œâ”€â”€ api/                         # FastAPI å¾Œç«¯
â”‚   â”œâ”€â”€ main.py
â”‚   â””â”€â”€ firestore_client.py
â”‚
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ ci.yml                   # GitHub Actions CI/CD
â”‚
â”œâ”€â”€ requirements.txt            # Python ä¾è³´
â”œâ”€â”€ QUICK_TEST.sh               # å¿«é€Ÿ API æ¸¬è©¦è…³æœ¬
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹• Spring Boot å¾Œç«¯

```bash
cd backend
mvn spring-boot:run
```

**API æ–‡ä»¶**ï¼šhttp://localhost:8080/api/beverages  
**H2 Console**ï¼šhttp://localhost:8080/h2-console
- JDBC URL: `jdbc:h2:mem:beveragewarehouse`
- Username: `sa`
- Password: ï¼ˆç©ºç™½ï¼‰

### 2. åŸ·è¡Œ TDD é«˜ä½µç™¼æ¸¬è©¦

```bash
cd backend
mvn test -Dtest=BeverageServiceConcurrencyTest
```

### 3. åŸ·è¡Œ JMeter å£“åŠ›æ¸¬è©¦

```bash
# ä½¿ç”¨ GUI
jmeter -t jmeter/SmartWarehouse_Concurrency_Test.jmx

# æˆ–ä½¿ç”¨å‘½ä»¤åˆ—ï¼ˆç„¡ GUIï¼‰
jmeter -n -t jmeter/SmartWarehouse_Concurrency_Test.jmx \
  -l jmeter/results.jtl \
  -e -o jmeter/report
```

è©³ç´°èªªæ˜è«‹åƒè€ƒï¼š[jmeter/README.md](./jmeter/README.md)

### 4. å¿«é€Ÿ API æ¸¬è©¦

```bash
# åŸ·è¡Œå¿«é€Ÿæ¸¬è©¦è…³æœ¬
./QUICK_TEST.sh

# æˆ–æ‰‹å‹•æ¸¬è©¦
curl -X POST http://localhost:8080/api/beverages/stock-in \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ç¤¦æ³‰æ°´",
    "quantity": 100,
    "productionDate": "2024-01-01",
    "expiryDate": "2025-01-01"
  }'
```

## ğŸ“Š API ç«¯é»èªªæ˜

### é£²æ–™ç®¡ç† API

| æ–¹æ³• | è·¯å¾‘ | åŠŸèƒ½ | é–æ©Ÿåˆ¶ |
|------|------|------|--------|
| GET | `/api/beverages` | å–å¾—æ‰€æœ‰é£²æ–™ | - |
| GET | `/api/beverages/{id}` | æ ¹æ“š ID å–å¾—é£²æ–™ | - |
| POST | `/api/beverages/stock-in` | å…¥åº«é£²æ–™ | - |
| POST | `/api/beverages/stock-out` | å‡ºåº«é£²æ–™ | âœ… æ‚²è§€é– |
| PUT | `/api/beverages/{id}` | æ›´æ–°é£²æ–™è³‡è¨Š | - |
| DELETE | `/api/beverages/{id}` | åˆªé™¤é£²æ–™ | - |
| GET | `/api/beverages/expired` | å–å¾—å·²éæœŸçš„é£²æ–™ | - |
| GET | `/api/beverages/expiring-soon` | å–å¾—å³å°‡éæœŸçš„é£²æ–™ | - |
| GET | `/api/beverages/statistics` | å–å¾—åº«å­˜çµ±è¨ˆ | - |

## ğŸ”’ è³‡æ–™ä¸€è‡´æ€§ä¿è­‰

### æ‚²è§€é–æ©Ÿåˆ¶

```java
@Lock(LockModeType.PESSIMISTIC_WRITE)
@Query("SELECT b FROM Beverage b WHERE ...")
List<Beverage> findAvailableBeveragesByNameOrderByExpiryWithLock(...);
```

**å·¥ä½œåŸç†**ï¼š
1. ç•¶åŸ·è¡Œç·’ A æŸ¥è©¢ä¸¦åŠ é–æ™‚ï¼Œå…¶ä»–åŸ·è¡Œç·’å¿…é ˆç­‰å¾…
2. åŸ·è¡Œç·’ A å®Œæˆäº‹å‹™æäº¤å¾Œï¼Œé–æ‰æœƒé‡‹æ”¾
3. ç¢ºä¿åŒä¸€æ™‚é–“åªæœ‰ä¸€å€‹åŸ·è¡Œç·’å¯ä»¥ä¿®æ”¹åº«å­˜

### é©—æ”¶æ¨™æº–

âœ… **åº«å­˜æ‰£æ¸›ç²¾ç¢ºåŒ¹é…**ï¼šåº«å­˜æ‰£æ¸›æ•¸é‡ = è¨‚å–®æˆåŠŸæ•¸ Ã— æ¯å–®æ•¸é‡  
âœ… **ç„¡è² åº«å­˜**ï¼šæœ€çµ‚åº«å­˜ >= 0  
âœ… **è³‡æ–™ä¸€è‡´æ€§**ï¼šåˆå§‹åº«å­˜ - æˆåŠŸå‡ºåº«ç¸½æ•¸ = æœ€çµ‚åº«å­˜

## ğŸ“ˆ æ¸¬è©¦çµæœç¯„ä¾‹

### TDD æ¸¬è©¦ï¼ˆJUnitï¼‰

```
é«˜ä½µç™¼æ¸¬è©¦çµæœï¼š
åˆå§‹åº«å­˜: 1000
ä½µç™¼åŸ·è¡Œç·’æ•¸: 100
æ¯å€‹åŸ·è¡Œç·’å‡ºåº«æ•¸é‡: 5
æˆåŠŸå‡ºåº«çš„åŸ·è¡Œç·’æ•¸: 100
å¤±æ•—çš„åŸ·è¡Œç·’æ•¸: 0
å¯¦éš›å‡ºåº«ç¸½æ•¸: 500
é æœŸå‡ºåº«ç¸½æ•¸: 500
æœ€çµ‚åº«å­˜: 500
é æœŸåº«å­˜: 500
âœ… æ‰€æœ‰é©—æ”¶æ¨™æº–é€šé
```

### JMeter å£“åŠ›æ¸¬è©¦

- **åŸ·è¡Œç·’æ•¸**ï¼š100
- **åŒæ­¥æ©Ÿåˆ¶**ï¼šSynchronizing Timer
- **æˆåŠŸç‡**ï¼š100%
- **å¹³å‡å›æ‡‰æ™‚é–“**ï¼š< 100ms
- **è³‡æ–™ä¸€è‡´æ€§**ï¼šâœ… é€šé

## ğŸ’¡ æ ¸å¿ƒåŠŸèƒ½èªªæ˜

### 1. FIFO å‡ºåº«ç­–ç•¥
ç³»çµ±æœƒè‡ªå‹•æŒ‰ç…§**å…ˆé€²å…ˆå‡ºï¼ˆFIFOï¼‰**åŸå‰‡å‡ºåº«ï¼Œå„ªå…ˆå‡ºåº«**æœ€æ—©éæœŸ**çš„é£²æ–™ï¼Œç¢ºä¿åº«å­˜æ–°é®®åº¦ã€‚

### 2. æ‚²è§€é–æ©Ÿåˆ¶
- ä½¿ç”¨ `@Lock(LockModeType.PESSIMISTIC_WRITE)` å°è³‡æ–™åº«è¨˜éŒ„åŠ é–
- ç¢ºä¿é«˜ä½µç™¼ä¸‹ä¸æœƒå‡ºç¾è² åº«å­˜
- ä¿è­‰åº«å­˜æ‰£æ¸›çš„åŸå­æ€§

### 3. éæœŸæª¢æŸ¥
- **å·²éæœŸ**ï¼šæœ‰æ•ˆæœŸé™ < ä»Šå¤©
- **å³å°‡éæœŸ**ï¼š7 å¤©å…§æœƒéæœŸ
- **è‡ªå‹•è¨ˆç®—**ï¼šæ¯æ¬¡æŸ¥è©¢è‡ªå‹•è¨ˆç®—éæœŸç‹€æ…‹

## ğŸ’° æˆæœ¬èªªæ˜

**å®Œå…¨å…è²»ï¼** æ‰€æœ‰æœå‹™éƒ½åœ¨å…è²»å±¤ç¯„åœå…§ï¼š

| æœå‹™ | å…è²»é¡åº¦ | èªªæ˜ |
|------|---------|------|
| **H2 Database** | ç„¡é™åˆ¶ | å…§å­˜è³‡æ–™åº«ï¼Œå®Œå…¨å…è²» |
| **JMeter** | ç„¡é™åˆ¶ | é–‹æºå·¥å…·ï¼Œå®Œå…¨å…è²» |
| **GitHub Actions** | æ¯æœˆ 2000 åˆ†é˜ | å€‹äººå¸³è™Ÿå…è²» |
| **Firestore** | æ¯å¤© 50K è®€å–ã€20K å¯«å…¥ | GCP å…è²»å±¤ |
| **GCP Logging** | 50 GB/æœˆ | å…è²» |

## ğŸ“ å­¸ç¿’é‡é»

é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†ï¼š

### å¾Œç«¯é–‹ç™¼
1. **Spring Boot æ¡†æ¶** - RESTful API é–‹ç™¼
2. **JPA/Hibernate** - ORM è³‡æ–™åº«æ“ä½œ
3. **æ‚²è§€é–æ©Ÿåˆ¶** - é«˜ä½µç™¼è³‡æ–™ä¸€è‡´æ€§ä¿è­‰
4. **äº‹å‹™ç®¡ç†** - `@Transactional` åŸå­æ€§æ“ä½œ
5. **åˆ†å±¤æ¶æ§‹** - Controller â†’ Service â†’ Repository
6. **è³‡æ–™é©—è­‰** - Jakarta Validation

### æ¸¬è©¦èˆ‡ DevOps
1. **TDD æ¸¬è©¦** - æ¸¬è©¦é©…å‹•é–‹ç™¼
2. **å£“åŠ›æ¸¬è©¦** - JMeter é«˜ä½µç™¼æ¸¬è©¦
3. **CI/CD è‡ªå‹•åŒ–** - GitHub Actions å·¥ä½œæµç¨‹
4. **æ¸¬è©¦è‡ªå‹•åŒ–** - Playwright æœ€ä½³å¯¦è¸
5. **é›²ç«¯æ•´åˆ** - Firestore NoSQL æ“ä½œ

## ğŸ“ æŠ€è¡“äº®é»

1. âœ… **å…¨ç«¯èƒ½åŠ›**ï¼šJava Spring Boot + Python FastAPI
2. âœ… **è³‡æ–™åº«ç¶“é©—**ï¼šSQL (H2) + NoSQL (Firestore)
3. âœ… **é«˜ä½µç™¼è™•ç†**ï¼šæ‚²è§€é–æ©Ÿåˆ¶ç¢ºä¿è³‡æ–™ä¸€è‡´æ€§
4. âœ… **æ¸¬è©¦å°ˆæ¥­**ï¼šTDD + JMeter å£“åŠ›æ¸¬è©¦
5. âœ… **è‡ªå‹•åŒ–æ€ç¶­**ï¼šCI/CD æœ€ä½³å¯¦è¸
6. âœ… **æˆæœ¬æ„è­˜**ï¼šå®Œå…¨ä½¿ç”¨å…è²»æœå‹™

## ğŸš€ ä¸‹ä¸€æ­¥æ“´å±•

1. **å‰ç«¯å„€è¡¨æ¿** - React/Vue è¦–è¦ºåŒ–ä»‹é¢
2. **å‘Šè­¦ç³»çµ±** - Slack/Discord éæœŸæé†’
3. **æ‰¹æ¬¡æ“ä½œ** - æ‰¹é‡å…¥åº«/å‡ºåº«
4. **å ±è¡¨åŠŸèƒ½** - åº«å­˜å ±è¡¨ã€é€²å‡ºè²¨è¨˜éŒ„
5. **å¤šç¨®é£²æ–™** - æ“´å±•æ”¯æ´å…¶ä»–é£²æ–™é¡å‹
6. **åˆ†æ•£å¼é–** - Redis åˆ†æ•£å¼é–ï¼ˆå¤šå¯¦ä¾‹éƒ¨ç½²ï¼‰

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [å¿«é€Ÿé–‹å§‹æŒ‡å—](./QUICKSTART.md)
- [è©³ç´°è¨­å®šèªªæ˜](./SETUP.md)
- [API ä½¿ç”¨ç¯„ä¾‹](./API_EXAMPLES.md)
- [JMeter æ¸¬è©¦èªªæ˜](./jmeter/README.md)
- [Git è¨­å®šæŒ‡å—](./GIT_SETUP.md)

## ğŸ“ License

MIT License

---

**å°ˆæ¡ˆåç¨±**ï¼šSmartWarehouseï¼ˆæ™ºæ…§å€‰åº«ç³»çµ±ï¼‰  
**æŠ€è¡“æ£§**ï¼šSpring Boot + H2 Database + Pessimistic Locking + JMeter + TDD  
**æˆæœ¬**ï¼š$0/æœˆï¼ˆå®Œå…¨å…è²»ï¼‰
